{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"pending-approvals\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"title is-1\"\n}, \"Venter på godkendelse\", -1 /* HOISTED */);\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.pendingUsers, user => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: user.id\n    }, [_createTextVNode(_toDisplayString(user.email) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $options.approveUser(user.id)\n    }, \"Godkend\", 8 /* PROPS */, _hoisted_3)]);\n  }), 128 /* KEYED_FRAGMENT */))]), $data.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","$data","pendingUsers","user","id","_createTextVNode","_toDisplayString","email","onClick","$event","$options","approveUser","_hoisted_3","errorMessage","_hoisted_4","_createCommentVNode"],"sources":["/home/peter/projects/bus-frontend/src/views/PendingApprovals.vue"],"sourcesContent":["<template>\n    <div class=\"pending-approvals\">\n        <h1 class=\" title is-1\">Venter på godkendelse</h1>\n        <ul>\n            <li v-for=\"user in pendingUsers\" :key=\"user.id\">\n                {{ user.email }}\n                <button @click=\"approveUser(user.id)\">Godkend</button>\n            </li>\n        </ul>\n        <p v-if=\"errorMessage\">{{ errorMessage }}</p>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { useAuthStore } from '@/stores/auth';\n\nexport default {\n    data() {\n        return {\n            pendingUsers: [],\n            errorMessage: '',\n        };\n    },\n    async created() {\n        try {\n            const authStore = useAuthStore();\n            const response = await axios.get('http://localhost:8000/api/approve-users/', {\n                headers: {\n                    Authorization: `Bearer ${authStore.token}`,\n                },\n            });\n            this.pendingUsers = response.data;\n        } catch (error) {\n            this.errorMessage = 'Failed to load pending users.';\n        }\n    },\n    methods: {\n        async approveUser(userId) {\n            try {\n                const authStore = useAuthStore();\n                await axios.post('http://localhost:8000/api/approve-users/${userId}/', null, {\n                    headers: {\n                        Authorization: `Bearer ${authStore.token}`,\n                    },\n                });\n                this.pendingUsers = this.pendingUsers.filter(user => user.id !== userId);  // Remove approved user from the list\n            } catch (error) {\n                this.errorMessage = 'Failed to approve user.';\n            }\n        },\n    },\n};\n</script>\n"],"mappings":";;EACSA,KAAK,EAAC;AAAmB;gCAC1BC,mBAAA,CAAkD;EAA9CD,KAAK,EAAC;AAAa,GAAC,uBAAqB;mBAFrD;;EAAAE,GAAA;AAAA;;uBACIC,mBAAA,CASM,OATNC,UASM,GARFC,UAAkD,EAClDJ,mBAAA,CAKK,c,kBAJDE,mBAAA,CAGKG,SAAA,QAPjBC,WAAA,CAI+BC,KAAA,CAAAC,YAAY,EAApBC,IAAI;yBAAfP,mBAAA,CAGK;MAH6BD,GAAG,EAAEQ,IAAI,CAACC;QAJxDC,gBAAA,CAAAC,gBAAA,CAKmBH,IAAI,CAACI,KAAK,IAAG,GAChB,iBAAAb,mBAAA,CAAsD;MAA7Cc,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,WAAW,CAACR,IAAI,CAACC,EAAE;OAAG,SAAO,iBAN7DQ,UAAA,E;oCASiBX,KAAA,CAAAY,YAAY,I,cAArBjB,mBAAA,CAA6C,KATrDkB,UAAA,EAAAR,gBAAA,CASkCL,KAAA,CAAAY,YAAY,oBAT9CE,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}