{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// stores/auth.js\n\nimport { defineStore } from 'pinia';\nimport axios from 'axios';\nexport const useAuthStore = defineStore('auth', {\n  state: () => ({\n    token: localStorage.getItem('token') || null\n  }),\n  actions: {\n    async login(email, password) {\n      try {\n        const response = await axios.post(`${process.env.VUE_APP_BACKEND_URL}/api/token/`, {\n          email,\n          password\n        });\n        this.token = response.data.access;\n        localStorage.setItem('token', this.token); // Store the token\n      } catch (error) {\n        throw new Error('Login failed');\n      }\n    },\n    logout() {\n      this.token = null;\n      localStorage.removeItem('token'); // Clear the token from localStorage\n      this.$router.push({\n        name: 'Login'\n      }); // Redirect to login page\n    },\n    isAuthenticated() {\n      return !!this.token;\n    }\n  }\n});","map":{"version":3,"names":["defineStore","axios","useAuthStore","state","token","localStorage","getItem","actions","login","email","password","response","post","process","env","VUE_APP_BACKEND_URL","data","access","setItem","error","Error","logout","removeItem","$router","push","name","isAuthenticated"],"sources":["/home/peter/projects/bus-frontend/src/stores/auth.js"],"sourcesContent":["// stores/auth.js\n\nimport { defineStore } from 'pinia';\nimport axios from 'axios';\n\nexport const useAuthStore = defineStore('auth', {\n    state: () => ({\n        token: localStorage.getItem('token') || null,\n    }),\n    actions: {\n        async login(email, password) {\n            try {\n                const response = await axios.post(`${process.env.VUE_APP_BACKEND_URL}/api/token/`, {\n                    email,\n                    password,\n                });\n\n                this.token = response.data.access;\n                localStorage.setItem('token', this.token);  // Store the token\n            } catch (error) {\n                throw new Error('Login failed');\n            }\n        },\n        logout() {\n            this.token = null;\n            localStorage.removeItem('token');  // Clear the token from localStorage\n            this.$router.push({ name: 'Login' });  // Redirect to login page\n        },\n        isAuthenticated() {\n            return !!this.token;\n        },\n    },\n});\n"],"mappings":";AAAA;;AAEA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,YAAY,GAAGF,WAAW,CAAC,MAAM,EAAE;EAC5CG,KAAK,EAAEA,CAAA,MAAO;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI;EAC5C,CAAC,CAAC;EACFC,OAAO,EAAE;IACL,MAAMC,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;MACzB,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB,aAAa,EAAE;UAC/EN,KAAK;UACLC;QACJ,CAAC,CAAC;QAEF,IAAI,CAACN,KAAK,GAAGO,QAAQ,CAACK,IAAI,CAACC,MAAM;QACjCZ,YAAY,CAACa,OAAO,CAAC,OAAO,EAAE,IAAI,CAACd,KAAK,CAAC,CAAC,CAAE;MAChD,CAAC,CAAC,OAAOe,KAAK,EAAE;QACZ,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;MACnC;IACJ,CAAC;IACDC,MAAMA,CAAA,EAAG;MACL,IAAI,CAACjB,KAAK,GAAG,IAAI;MACjBC,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC,CAAC,CAAE;MACnC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC,CAAC,CAAE;IAC3C,CAAC;IACDC,eAAeA,CAAA,EAAG;MACd,OAAO,CAAC,CAAC,IAAI,CAACtB,KAAK;IACvB;EACJ;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}